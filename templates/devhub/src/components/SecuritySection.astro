---
interface SecurityFeature {
  title: string;
  description: string;
  link: string;
  linkText: string;
}

const features: SecurityFeature[] = [
  {
    title: 'Security debt, solved.',
    description: 'Leverage security campaigns and AI Autofix to reduce application vulnerabilities.',
    link: '#code-security',
    linkText: 'Learn about Code Security'
  },
  {
    title: 'Dependencies you can depend on.',
    description: 'Update vulnerable dependencies with supported fixes for breaking changes.',
    link: '#dependabot',
    linkText: 'Learn about Dependabot'
  },
  {
    title: 'Your secrets, your business.',
    description: 'Detect, prevent, and remediate leaked secrets across your organization.',
    link: '#secret-protection',
    linkText: 'Learn about Secret Protection'
  }
];

const stats = [
  { value: '70%', label: 'MTTR reduction', sublabel: 'with AI Autofix' },
  { value: '8.3M', label: 'secret leaks stopped', sublabel: 'in the past 12 months with push protection' }
];
---

<section class="security-section section" id="security">
  <!-- Background -->
  <div class="security-bg" aria-hidden="true">
    <div class="security-glow"></div>
  </div>

  <div class="container">
    <!-- Header -->
    <div class="security-header">
      <h2 class="security-title">
        Apply fixes in seconds.
        <span class="security-subtitle">Spend less time debugging and more time building features with AI Autofix.</span>
      </h2>
      <a href="#advanced-security" class="security-link">
        Explore Advanced Security
        <svg viewBox="0 0 16 16" width="16" height="16" fill="currentColor" aria-hidden="true">
          <path d="M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.751.751 0 01-1.042-.018.751.751 0 01-.018-1.042L9.94 8 6.22 4.28a.75.75 0 010-1.06z"/>
        </svg>
      </a>
    </div>

    <!-- Feature Cards -->
    <div class="security-features">
      {features.map((feature) => (
        <article class="security-card">
          <div class="card-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              <path d="M9 12l2 2 4-4"/>
            </svg>
          </div>
          <h3 class="card-title">{feature.title}</h3>
          <p class="card-description">{feature.description}</p>
          <a href={feature.link} class="card-link">
            {feature.linkText}
            <svg viewBox="0 0 16 16" width="12" height="12" fill="currentColor" aria-hidden="true">
              <path d="M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.751.751 0 01-1.042-.018.751.751 0 01-.018-1.042L9.94 8 6.22 4.28a.75.75 0 010-1.06z"/>
            </svg>
          </a>
        </article>
      ))}
    </div>

    <!-- Stats -->
    <div class="security-stats">
      {stats.map((stat) => (
        <div class="stat-card">
          <div class="stat-value">{stat.value}</div>
          <div class="stat-label">{stat.label}</div>
          <div class="stat-sublabel">{stat.sublabel}</div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .security-section {
    position: relative;
    background-color: var(--color-canvas-default);
  }

  .security-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .security-glow {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    height: 60%;
    background: radial-gradient(ellipse 50% 40% at 50% 50%, rgba(63, 185, 80, 0.08) 0%, transparent 70%);
  }

  /* Header */
  .security-header {
    position: relative;
    text-align: center;
    max-width: 700px;
    margin-inline: auto;
    margin-bottom: var(--space-16);
  }

  .security-title {
    font-size: clamp(var(--font-size-2xl), 4vw, var(--font-size-4xl));
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-snug);
    margin-bottom: var(--space-6);
  }

  .security-subtitle {
    display: block;
    font-weight: var(--font-weight-normal);
    color: var(--color-fg-muted);
    margin-top: var(--space-2);
  }

  .security-link {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    font-weight: var(--font-weight-semibold);
    color: var(--color-link);
  }

  .security-link:hover {
    color: var(--color-link-hover);
  }

  .security-link svg {
    transition: transform var(--transition-fast);
  }

  .security-link:hover svg {
    transform: translateX(4px);
  }

  /* Feature Cards */
  .security-features {
    position: relative;
    display: grid;
    gap: var(--space-6);
    margin-bottom: var(--space-16);
  }

  @media (min-width: 768px) {
    .security-features {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .security-card {
    padding: var(--space-8);
    background-color: var(--color-canvas-subtle);
    border: 1px solid var(--color-border-default);
    border-radius: var(--radius-xl);
    transition: all var(--transition-base);
  }

  .security-card:hover {
    border-color: var(--color-accent-fg);
    box-shadow: var(--shadow-lg), 0 0 30px rgba(63, 185, 80, 0.1);
  }

  .card-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    margin-bottom: var(--space-4);
    background-color: var(--color-accent-subtle);
    border-radius: var(--radius-lg);
    color: var(--color-accent-fg);
  }

  .card-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-3);
  }

  .card-description {
    font-size: var(--font-size-base);
    color: var(--color-fg-muted);
    margin-bottom: var(--space-4);
    line-height: var(--line-height-relaxed);
  }

  .card-link {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-link);
  }

  .card-link:hover {
    color: var(--color-link-hover);
  }

  /* Stats */
  .security-stats {
    position: relative;
    display: grid;
    gap: var(--space-6);
  }

  @media (min-width: 768px) {
    .security-stats {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .stat-card {
    padding: var(--space-8);
    background: linear-gradient(135deg, var(--color-canvas-subtle) 0%, var(--color-canvas-inset) 100%);
    border: 1px solid var(--color-border-default);
    border-radius: var(--radius-xl);
    text-align: center;
  }

  .stat-value {
    font-size: clamp(var(--font-size-5xl), 8vw, var(--font-size-7xl));
    font-weight: var(--font-weight-bold);
    color: var(--color-accent-fg);
    line-height: 1;
    margin-bottom: var(--space-2);
  }

  .stat-label {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-fg-default);
    margin-bottom: var(--space-2);
  }

  .stat-sublabel {
    font-size: var(--font-size-sm);
    color: var(--color-fg-muted);
  }
</style>
